(this["webpackJsonpplaylist-generator"]=this["webpackJsonpplaylist-generator"]||[]).push([[0],{51:function(t,e,n){},52:function(t,e,n){},53:function(t,e,n){},72:function(t,e,n){"use strict";n.r(e);var a=n(0),s=n.n(a),c=n(19),r=n.n(c),i=(n(51),n(20)),o=n(15),l=(n.p,n(52),n(53),n(54),n(44)),u=n(9),j=n(21),d=n(75),b=n(74),f=n(43),h=n(77),O=n(80),p=n(79),m=n(78),x=n(46),g=n(1),v=function(t){var e=t.artist.name,n=t.artist.id,s=t.artist.external_urls.spotify,c=t.artist.images[0],r=t.artist.followers.total,i=t.artist.genres,l=i.length,u=i.map((function(t,e){return Object(g.jsxs)(g.Fragment,{children:[t,e<l-1?", ":""]})})),j=Object(a.useState)(!1),d=Object(o.a)(j,2),b=d[0],f=d[1];Object(a.useEffect)((function(){f(!1),t.listOfArtists.map((function(t){if(t.artistID===n)return f(!0),!0}))}),[n,t.listOfArtists,e]);return Object(g.jsxs)(p.a,{style:{wdith:"18rem"},children:[Object(g.jsx)(p.a.Img,{variant:"top",src:c&&c.url,onClick:function(){return function(t){var e=window.open(t,"_blank","noopener,noreferrer");e&&(e.opener=null)}(s)},className:"artistImage"}),Object(g.jsxs)(p.a.Body,{children:[Object(g.jsx)(p.a.Title,{children:e}),Object(g.jsxs)(m.a,{className:"list-group-flush align-left",children:[Object(g.jsxs)(x.a,{children:["Followers: ",r]}),Object(g.jsxs)(x.a,{children:["Generes: ",u]})]}),Object(g.jsx)(O.a,{variant:"primary",type:"submit",onClick:function(a){return function(a){a.preventDefault(),t.handleListChange(e,n),f(!0)}(a)},disabled:b,children:"Add to Artist List"})]})]})},y=n(27),S=n.n(y),N=n(38),C=n(22),k=n(23),I=function(t){var e=t.listofartists,n=t.token;return Object(g.jsx)("div",{children:Object(g.jsxs)(m.a,{children:[e&&e.map((function(e){return Object(g.jsxs)(m.a.Item,{children:[e.artistName,Object(g.jsx)(C.a,{className:"deleteButton",icon:k.a,onClick:function(n){return function(e,n,a){e.preventDefault(),t.handleListRemove(a,n)}(n,e.artistID,e.artistName)}})]},e.artistID)})),Object(g.jsx)(O.a,{variant:"primary",type:"submit",className:"generateButton",onClick:function(a){return function(a){a.preventDefault();var s={method:"GET",redirect:"follow"};function c(){return(c=Object(N.a)(S.a.mark((function a(){var c;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=[],a.next=3,Promise.all(e.map(function(){var t=Object(N.a)(S.a.mark((function t(e){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/getPopularSongs?artistID=".concat(e.artistID,"&token=").concat(n),s).then((function(t){return t.json()})).then((function(t){c.push.apply(c,Object(j.a)(t))})).catch((function(t){return console.log("error",t)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:t.handleSetListOfSongs(c);case 4:case"end":return a.stop()}}),a)})))).apply(this,arguments)}!function(){c.apply(this,arguments)}()}(a)},children:"Generate Popular Songs List"})]})})},D=function(t){var e=t.listofsongs;return Object(g.jsx)("div",{children:Object(g.jsxs)(m.a,{children:[e&&e.map((function(e){return Object(g.jsxs)(m.a.Item,{children:[Object(g.jsxs)("div",{className:"songArtist",children:[e.artistName,", ",e.albumName]}),Object(g.jsxs)("div",{children:[e.songName,Object(g.jsx)(C.a,{className:"deleteButton",icon:k.a,onClick:function(n){return function(e,n,a){e.preventDefault(),t.handleSetListOfSongsRemove(a,n)}(n,e.songID,e.songName)}})]})]},e.songID)})),Object(g.jsxs)("div",{className:"songListButtons",children:[Object(g.jsx)(O.a,{variant:"primary",type:"delete",className:"generateButton",onClick:function(e){return function(e){e.preventDefault(),t.handleClearSongList()}(e)},children:"Clear List"}),Object(g.jsx)(O.a,{variant:"success",type:"submit",className:"generateButton",onClick:function(){return t.setShowPopUp(!0)},children:"Create Playlist"})]})]})})},L=n(76),w=function(t){var e=Object(a.useState)(t),n=Object(o.a)(e,2),s=n[0],c=n[1];return{value:s,setValue:c,reset:function(){return c("")},bind:{value:s,onChange:function(t){c(t.target.value)}}}},P=function(t){var e=w(""),n=e.value,a=e.bind,s=e.reset,c=w(""),r=c.value,o=c.bind,l=c.reset,u=t.listofsongs,j=t.token;return Object(g.jsxs)(L.a,Object(i.a)(Object(i.a)({},t),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(g.jsx)(L.a.Header,{closeButton:!0,children:Object(g.jsx)(L.a.Title,{id:"contained-modal-title-vcenter",children:"Generate Spotify Playlist"})}),Object(g.jsx)(L.a.Body,{children:Object(g.jsxs)(b.a,{children:[Object(g.jsx)(f.a,{children:Object(g.jsxs)(h.a,{className:"spotifyForm",children:[Object(g.jsxs)(h.a.Group,{controlId:"formName",children:[Object(g.jsx)(h.a.Label,{children:"Playlist Name"}),Object(g.jsx)(h.a.Control,Object(i.a)({type:"text"},a))]}),Object(g.jsxs)(h.a.Group,{controlId:"formDescription",children:[Object(g.jsx)(h.a.Label,{children:"Description"}),Object(g.jsx)(h.a.Control,Object(i.a)({as:"textarea"},o))]})]})}),Object(g.jsxs)(f.a,{children:["Review Song List",Object(g.jsx)(m.a,{className:"popUpSongList",children:u&&u.map((function(e){return Object(g.jsxs)(m.a.Item,{children:[Object(g.jsxs)("div",{class:"songArtist",children:[e.artistName,", ",e.albumName]}),Object(g.jsxs)("div",{children:[e.songName,Object(g.jsx)(C.a,{className:"deleteButton",icon:k.a,onClick:function(n){return function(e,n,a){e.preventDefault(),t.handleSetListOfSongsRemove(a,n)}(n,e.songID,e.songName)}})]})]},e.songID)}))})]})]})}),Object(g.jsxs)(L.a.Footer,{children:[Object(g.jsx)(O.a,{variant:"success",type:"submit",onClick:function(t){return function(t){t.preventDefault();var e=[];u.map((function(t){e.push(t.songURI)}));var a={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({playlistData:{name:n,description:r,public:!1},songs:{uris:e}})};console.log(a.body),fetch("/api/createPlaylist?token=".concat(j),a).then((function(t){return t.json()})).then((function(t){console.log(t)})).catch((function(t){return console.log("error",t)})),s(),l()}(t)},children:"Create Playlist"}),Object(g.jsx)(O.a,{onClick:t.onHide,children:"Close"})]})]}))},A=function(t){var e=Object(a.useState)([]),n=Object(o.a)(e,2),s=n[0],c=n[1],r=Object(a.useState)(""),i=Object(o.a)(r,2),l=i[0],u=i[1],p=Object(a.useState)([]),m=Object(o.a)(p,2),x=m[0],y=m[1],S=Object(a.useState)([]),N=Object(o.a)(S,2),C=N[0],k=N[1],L=Object(a.useState)(!1),w=Object(o.a)(L,2),A=w[0],B=w[1],R=t.token;Object(a.useEffect)((function(){}));var G=function(t,e){var n=Object(j.a)(x);n.push({artistName:t,artistID:e}),y(n)},T=function(t,e){var n=Object(j.a)(C).filter((function(t){return t.songID!==e}));k(n)};return Object(g.jsxs)(d.a,{className:"main-container",children:[Object(g.jsx)(b.a,{children:Object(g.jsx)(f.a,{children:Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Spotify Playlist Generator"}),Object(g.jsx)("h3",{children:"Create Playlist with top songs from list of Artists"})]})})}),Object(g.jsxs)(b.a,{children:[Object(g.jsxs)(f.a,{children:[Object(g.jsxs)(h.a,{className:"align-left",onSubmit:function(t){t.preventDefault();""===s?u(""):fetch("/api/getArtist?artist=".concat(s,"&token=").concat(R),{method:"GET",redirect:"follow"}).then((function(t){return t.json()})).then((function(t){u(t)})).catch((function(t){return console.log("error",t)}))},children:[Object(g.jsxs)(h.a.Group,{controlId:"formSearchArtists",children:[Object(g.jsx)(h.a.Label,{children:"Artist Name"}),Object(g.jsx)(h.a.Control,{type:"text",placeholder:"Enter Artist",value:s,onChange:function(t){return c(t.target.value)}})]}),Object(g.jsx)(O.a,{variant:"primary",type:"submit",children:"Search"})]}),Object(g.jsx)(b.a,{children:l.length>0&&l.map((function(t){return Object(g.jsx)("div",{className:"artistCard",children:Object(g.jsx)(v,{artist:t,handleListChange:G,listOfArtists:x})},t.key)}))})]}),Object(g.jsxs)(f.a,{children:[Object(g.jsx)(b.a,{className:"listOfArtists",children:x.length>0&&Object(g.jsx)(I,{listofartists:x,handleListRemove:function(t,e){var n=Object(j.a)(x).filter((function(t){return t.artistID!==e}));y(n)},handleSetListOfSongs:function(t){var e=Object(j.a)(C);t.map((function(t){var n=t.album.name,a=t.artists[0].name,s=t.name,c=t.id,r=t.external_urls.spotify,i=t.uri,o=!1;e.map((function(t){t.songID===c&&(o=!0)})),o||e.push({albumName:n,artistName:a,songName:s,songID:c,songURL:r,songURI:i})})),k(e)},token:R})}),Object(g.jsx)(b.a,{className:"listOfSongs",children:C.length>0&&Object(g.jsx)(D,{listofsongs:C,handleSetListOfSongsRemove:T,handleClearSongList:function(){k([])},setShowPopUp:B})})]})]}),Object(g.jsx)(P,{show:A,onHide:function(){return B(!1)},listofsongs:C,handleSetListOfSongsRemove:T,token:R})]})},B=["user-read-private","user-read-email","playlist-modify-public","playlist-modify-private"],R=window.location.hash.substring(1).split("&").reduce((function(t,e){if(e){var n=e.split("=");t[n[0]]=decodeURIComponent(n[1])}return t}),{});window.location.hash="";var G=function(){var t=Object(a.useState)(!1),e=Object(o.a)(t,2),n=e[0],s=e[1];return Object(a.useEffect)((function(){var t=R.access_token;t&&s(t)}),[n]),Object(g.jsx)(l.a,{children:Object(g.jsx)("div",{className:"App",children:Object(g.jsxs)("div",{id:"page-body",children:[!n&&Object(g.jsxs)("div",{className:"loginButton",children:[Object(g.jsx)("header",{className:"headerText",children:"Welcome to Popular Songs Playlist Generator!"}),Object(g.jsx)("a",{className:"btn btn-success",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("f5c12e204437479da9efa53d9109b6ca","&redirect_uri=").concat("http://localhost:3000","&scope=").concat(B.join("%20"),"&response_type=token&show_dialog=true"),children:"Login to Spotify"})]}),Object(g.jsx)(u.c,{children:n&&Object(g.jsx)(u.a,{path:"/",render:function(t){return Object(g.jsx)(A,Object(i.a)(Object(i.a)({},t),{},{token:n}))}})})]})})})},T=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,81)).then((function(e){var n=e.getCLS,a=e.getFID,s=e.getFCP,c=e.getLCP,r=e.getTTFB;n(t),a(t),s(t),c(t),r(t)}))};r.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(G,{})}),document.getElementById("root")),T()}},[[72,1,2]]]);
//# sourceMappingURL=main.9e40c5b8.chunk.js.map